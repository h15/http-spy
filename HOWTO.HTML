<html>
  <head>
    <meta charset="utf-8">
    <title>HTTP::Spy HowTo</title>
  </head>
  <body>
<h1>Обзор</h1>
<p>
Данное руководство описывает основные принципы работы с HTTP::Spy.
HTTP::Spy -- средство инспекции HTTP пакетов. Предоставляет инструменты анализа
и модификации HTTP пакетов, проходящих через него. HTTP::Spy -- это
proxy-сервер, поэтому для его использования необходимо <a
href="#config-browser">настроить web-браузер на использование HTTP-proxy</a>.
</p>

<h1>Внешние зависимости</h1>
<p>
Для запуска HTTP::Proxy требуется установить интерпретатор perl версии 5.10 или
выше. Для работы с интерфейсом панели администрирования требуется современный
web-браузер с поддержкой ajax (Internet Explorer 8 или выше, Firefox 4 или выше,
Chrome начиная с версии 6).
</p>

<h1>Панель администрирования</h1>
<p>
Для доступа к панели администрирования требуется настроить браузер на
<a
href="#config-browser">использование проксирования HTTP::Spy</a>. После этого
нужно зайти на страницу http.spy -- HTTP::Spy перехватит запрос и отобразит
интерфейс панели администрирования. Панель администрирования представляет собой
окно с вкладками.
<ul>
  <li>Вкладка Log отображает последние события, происходящие в HTTP::Spy.
Например, передача файла (HTTP документа) через HTTP::Spy.
  </li>
  <li>Вкладка Inspect отвечает за инспекцию пакетов. В левой части находится
форма для настройки фильтра перехвата пакетов: какие пакеты следует
инспектировать, а какие -- пропускать.
    <ul>
      <li>Первая колонка -- методы запросов HTTP, которые нам нужны.</li>
      <li>Поле host -- указание на то, какой именно web-сервер следует
инспектировать. <em>Если поле host пусто, то считается, что нам подходят любые
web-сервера.</em></li>
      <li>Поле except предлагает указать список расширений файлов, которые
инспектировать не следует. Элементы списка разделяются вертикальной чертой.</li>
      <li>Поля "To server" и "From server" указывают на то, перехватываем мы
запросы или ответы. Если поля пусты, обработка не производится.</li>
    </ul>
По завершению настройки следует отправить конфигурацию на сервер, нажав кнопку
"Start!". Не забывайте, панель администрирования -- это лишь тонкий клиент к
HTTP::Spy.

По мере прихода новых пакетов, будут появляться справа от формы синие записи
вида [направление] [имя хоста] [метод]. Например:
<a href="javascript: void(0)"><div><b>&rArr; google.com
[GET]</b><div>http://google.com/search?q=HTTP+Spy</div></div></a>
Кликнув по ней, появится окно редактирования пакета. Завершив редактирование,
следует нажать "Send update" -- по нажатию пакет будет изменён и отправлен
адресату. Цвет записи о пакете станет серым.
  </li>
</ul>
</p>

<a name="config-browser"></a>
<h1>Настройка проксирования в различных браузерах</h1>

<h3>Internet Explorer</h3>
<p>Сервис &rarr; Свойства обозревателя &rarr; Подключения &rarr; Настройка
LAN</p>

<h3>Mozilla Firefox / Iceweasel</h3>
<p>Menu &rarr; Preferences &rarr; Network &rarr; Connection &rarr; Settings.</p>

<h3>Google Chrome / Chromium</h3>
<p>
Запустить исполняемый файл, запускающий браузер с параметром
--proxy-server=localhost:3128. Например, через свойства ярлыка в Windows или
командой <code>chromium-browser --proxy-server=localhost:3128</code> в Unix.
</p>

<hr>
<h3>Смотри также</h3>
<ul>
  <li><a href="https://github.com/h15/http-spy">Репозиторий HTTP::Spy</a>.</li>
  <li><a href="http://search.cpan.org/">Информация о модулях, используемых в
HTTP::Spy</a>.
</ul>
  </body>
</html>